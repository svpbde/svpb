{% load static %}

<head>

<title>Reservierungen - {{title}}</title>

<!-- Automatically Reload Page -->
<script>
  
  function initialize(){
	console.log('Init');
	setInterval(switchTab, 10000);

    console.log('Select slider step');
    const s = document.getElementById("slider");
    const stepDiv = s.children[{{tab}}-1];
    stepDiv.classList.add("selected");
  }

  function switchTab() {
        var nextTab = 1;
	    var currentTab = 1;

	    {% if request.GET.tab %}
	    currentTab = {{request.GET.tab}};
	    {% endif %}

        if (currentTab) {
		nextTab = currentTab+1;
	}
	if (nextTab>4) nextTab = 1;
	window.location.href = '/boote/booking/today/public/?tab='+nextTab;

  }

  window.onload=initialize
</script>

<link rel="stylesheet" href="{% static 'fontawesomefree/css/fontawesome.min..css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'fontawesomefree/css/solid.min.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'boote/css/boote_public.css' %}" type="text/css">


 <!-- Configuring Web Application -->
 <link rel="manifest" href="{% static 'boote/manifest.json' %}">
 <meta name="apple-mobile-web-app-capable" content="yes" />
 <meta name="apple-mobile-web-app-status-bar-style" content="black" />

 <meta name="apple-mobile-web-app-title" content="SVPB Reservierungen">
 <link rel="apple-touch-startup-image" href="/assets/favicon/favicon300.png">

</head>



<BODY>

<!-- COMMON -->
<DIV id="tab_{{tab}}" class="tab">
	<div class="boat_summary">
        <DIV class="img_container">
            {% if selected_image %}
            <img src="{% static selected_image %}" alt="Boat image" class="boat_img"/>
            {% endif %}
		</DIV>
        <DIV class="right_panel">
            <div id="slider">
                    <div>Conger</div>
                    <div>Mariner 19</div>
                    <div>Andere Boote</div>
                    <div>Bootskran</div>
            </div>

            <div class="boat_panel_content">
                <div>
                    <h1>{{title}}</h1>
                    <h2>Reservierungen</h2>
                </div>
                <div>
                    <span>{{weekday}}</span>                    
                    <span>{{date}}</span>                    
                    <span id="current_time">{{time}}</span>                    
                </div>
            </div>


            <div id="legend">
                <div>
                    <div style="background: #5CB85C;"></div>
                    <span>Frei</span>
                </div>
                <div>
                    <div style="background: #E4FF2E;"></div>
                    <span>Privat</span>
                </div>
                <div>
                    <div style="background: #FF5151;"></div>
                    <span>Regata</span>
                </div>
                <div>
                    <div style="background: #54f3ff;"></div>
                    <span>Ausbildung</span>
                </div>
            </div>

        </DIV>
	</div>

    <TABLE class='boatslist'>
        <thead>
            <tr>
                <th>Boot</th>
                <th class="date" colspan="2">08:00</th>
                <th class="date" colspan="2">09:00</th>
                <th class="date" colspan="2">10:00</th>
                <th class="date" colspan="2">11:00</th>
                <th class="date" colspan="2">12:00</th>
                <th class="date" colspan="2">13:00</th>
                <th class="date" colspan="2">14:00</th>
                <th class="date" colspan="2">15:00</th>
                <th class="date" colspan="2">16:00</th>
                <th class="date" colspan="2">17:00</th>
                <th class="date" colspan="2">18:00</th>
                <th class="date" colspan="2">19:00</th>
                <th class="date" colspan="2">20:00</th>
                <th class="date" colspan="2">21:00</th>
            </tr>
        </thead>

        {% for boat, overviewday in filtered_bookings %}
        <TR>
            <TD class="firstcol"> 
                <b>{{ boat.name }}</b><br>{{ boat.type.name }}
            </TD>
            {% for userid, usertag, type in overviewday %}
                {% if userid %}
                    <TD class='{{ type }}'>
                        <i class="fa-solid fa-lock"><br>
                        <span class="tinyfont">{{ type }}</span>
                    </TD>
                {% else %}
                    <TD class='booked0'>&nbsp;</TD>
                {% endif %}
            {% endfor %}
        </TR>
        {% empty %}
            <TR><TD>No bookings found for this tab.</TD></TR>
        {% endfor %}
    </TABLE>
</DIV>


</body>
